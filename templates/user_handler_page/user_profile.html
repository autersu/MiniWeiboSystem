<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>我的微博主页</title>
  <link rel="shortcut icon" href="/static/img/about_UI/favicon.ico" />
  <link rel="bookmark" href="/static/img/about_UI/favicon.ico" type="image/x-icon"/>
  <script type="text/javascript" src="/static/js/jquery-3.2.1.js"></script>
  <link rel="stylesheet" href="/static/plugins/bootstrap-3.3.7-dist/css/bootstrap.css">
  <link rel="stylesheet" href="/static/plugins/Font-Awesome-master/css/font-awesome.css">


  <link rel="stylesheet" href="/static/css/top_info.css">
  <link rel="stylesheet" href="/static/css/head_band.css">
  <link rel="stylesheet" href="/static/css/threePart.css">
  <link rel="stylesheet" href="/static/css/personal_homepage.css">
  <link rel="stylesheet" href="/static/css/related_info.css">
  <link rel="stylesheet" href="/static/css/bottom_info.css">

  <script type="text/javascript" src="/static/plugins/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
  <style type="text/css">

    *{
        padding: 0;
        margin: 0;
    }

    body{
        background-image: url("/static/img/about_UI/skin.png");
        background-size:1366px auto;
        font-family: "MyNewFont","Arial","Microsoft YaHei",serif;
    }
    .clearfix:after{
        content: '.';
        clear: both;
        display: block;
        visibility: hidden;
        height: 0;
    }
    hide{
        display: none;
    }
  </style>
</head>
<body>
    <!-- 头部仿汽车之家的顶部信息栏 -->
    <div class="top_info clearfix">
    <div class="locate">
    </div>
    <div class="c0">
        <span class="c1"><i class="fa fa-location-arrow"></i>郑州</span>
        <span class="c2">切换 <i class="caret"></i></span>
    </div>
    <div class="login_register">
        <span class="c3" >您好!请</span>
        <a class="c5" href="/signup/">登录</a>
        <span class="c3">或</span>
        <a class="c5" href="/signup/">注册</a>
    </div>
</div>
    <!--此为第二行的菜单栏说明-->
    <div class="head_band clearfix">
        <!--此为新浪logo-->
        <div class="logo"></div>

        <!--此处就有form表单或者ajax-->
        <div class="search">
            <input type="text" placeholder="大家正在搜:为什么毕业答辩要等到六月份" name="condition"/>
            <button type="submit" class="fa fa-search fa-2x"></button>
        </div>

        <!--此为几个主要菜单栏-->
        <div class="main_menu">
            <div class="linkPage">
                <a href="/index/"><i class="fa fa-home fa-2x"></i>&nbsp;首页</a>
                <a href="javascript:void(0);"><i class="fa fa-youtube-play fa-2x"></i>&nbsp;视频</a>
                <a href="javascript:void(0);"><i class="fa fa-compass fa-2x fa-fw"></i>&nbsp;发现</a>
                <a href="javascript:void(0);"><i class="fa fa-gamepad fa-2x fa-fw"></i>&nbsp;游戏</a>
            </div>
            <div class="myfunction">
                <div class="dropdown">
                  <i class="fa fa-envelope-o fa-2x" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <ul class="dropdown-menu" aria-labelledby="dLabel">
                    <li>功能1</li>
                    <li>功能2</li>
                  </ul>
                </div>

                <div class="dropdown">
                  <i class="fa fa-cog fa-2x" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <ul class="dropdown-menu" aria-labelledby="dLabel">
                    <li>功能3</li>
                    <li>功能4</li>
                  </ul>
                </div>
                <div class="fa fa-wrench fa-2x"></div>

            </div>
        </div>

    </div>

    <div class="profile clearfix">
        {% for user_item in user_info %}
        <div  style="text-align: center;">
            <img src="/{{user_item.head_img}}" class="img-rounded" id="user_photo"/>
        </div>

        <div class="description">
            <span style="font-size: 20px;">{{user_item.username}}<i class="fa fa-venus sex_show">{{user_item.sex}}</i></span>
        </div>
        <div class="brief">
             <span>{{user_item.brief}}</span>
        </div>
        {% endfor %}
        <div class="column">
            <table class="tb_tab" cellpadding="0" cellspacing="0">
                <tbody>
                    <tr>
                        <td><a class="table_link" href="">我的主页</a></td>
                        <td><a class="table_link" href="">我的相册</a></td>
                        <td><a class="table_link" href="">管理中心</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="related_info clearfix">
        <div class="related_info1" style="height: 514px;width: 300px;float: left">
            <div class="fans_follows">
                <table  class="tb_counter" cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr>
                            <td>
                                <strong>{{follows_num.follows}}</strong>
                                <div>关注</div>
                            </td>
                            <td>
                                <strong>{{fans_num}}</strong>
                                <div>粉丝</div>
                            </td>
                            <td>
                                <strong>{{weibo_num.weibo_num}}</strong>
                                <div>微博</div>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="game">
                <span>集财神卡赢大奖</span>
                <span style="float: right;margin-right: 25px;">财神卡大厅&nbsp;&nbsp;<i class="fa fa-angle-right"></i></span>
            </div>
            <div class="verify">
                <div class="onepart">
                    <a href="javascript:void(0);">申请认证</a>
                    <span>| Lv9</span>
                </div>
                <div class="twopart">
                    <p>个人资料完成度 35%</p>
                    <div class="integrity">
                        <div class="bar" style="height:4px;width: 35%;background-color: orangered"></div>
                    </div>
                </div>
                <div class="threepart">
                    <span>编辑个人资料<i class="fa fa-angle-right"></i></span>
                </div>
            </div>
            <div class="thumb_up">
                <p>赞</p>
                <div>查看更多 ></div>
            </div>
        </div>
        <div class="related_info2" style="overflow: auto;">
            <div class="messageShow  clearfix" style="margin-top: 0;">
                <!--从数据库中拿到数据,按照某种规则拜访,加上相关样式-->
                {% for weibo_item in my_weibo %}
                    <div class="show1">
                        <div style="float: right;margin: 10px; color: grey;"><i class="fa fa-angle-down fa-2x"></i></div>
                        <div class="briefShow">
                            <img src="/{{weibo_item.user__head_img}}" id="photo_identity" class="img-rounded">
                            <p style="font-weight: bold;font-size: 18px;margin-left: 60px;margin-bottom: 3px;">{{ weibo_item.user__username}}</p>
                            <p style="margin-left: 60px;">{{ weibo_item.date }}</p>
                        </div>

                        <div class="textShow">
                            <p style="margin-left: 21px;">{{ weibo_item.text }}</p>
                        </div>

                        <div class="weibo_menu">
                            <dd id="icollect"><i class="fa fa-star-o"  style="cursor: pointer;">收藏</i></dd>
                            <dd id="icomment" target="{{weibo_item.id}}" onclick="ToggleCommentArea(this)"><i class="fa fa-comment-o" style="cursor: pointer;">评论</i></dd>
                            <dd id="ishare"><i class="fa fa-share-alt" style="cursor: pointer;">分享</i></dd>
                            <dd id="ilike"><i class="fa fa-thumbs-o-up" style="cursor: pointer;">点赞</i></dd>

                        </div>

                        <div class="commentInfo hide">
                            <div class="commentPlace">
                                {% for user_item in user_info%}
                                <div class="set_myComment">
                                    <img src="/{{user_item.head_img}}" style="width: 30px;height: 30px;border: 1px solid grey;">
                                    <input type="text" style="width: 518px;height: 30px;"/>
                                    <button weibo_id="{{weibo_item.id}}" target="{{user_item.id}}" onclick="setComment(this);" class="btn btn-default" style="margin: 15px;float: right;">评论</button>
                                </div>
                                {% endfor %}

                                <div class="get_allComment" id="commentZone"> </div>

                            </div>
                        </div>

                    </div>
                {% endfor%}

            </div>
            <div class="detail_personal_info clearfix">
                {% for person_item in personal_info %}
                <p><span>用户类型:</span>{{person_item.user}}</p>
                <p><span>用户名:</span>{{person_item.username}}</p>
                <p><span>个人简介:</span>{{person_item.brief}}</p>
                <p><span>性别:</span>{{person_item.sex}}</p>
                <p><span>邮箱:</span>{{person_item.email}}</p>
                <p><span>密码:</span>{{person_item.password}}</p>
                <p><span>头像:</span><img src="/{{person_item.head_img}}" alt=""></p>
                <p><span>注册时间:</span>{{person_item.registration_date}}</p>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="bottom_info clearfix">
        <div class="footer_link">
            <dl class="list">
                <dt>微博精彩</dt>
                <dd>
                    <a href="#">热门微博</a>
                    <a href="#">热门话题</a>
                </dd>
                <dd>
                    <a href="#">名人堂</a>
                    <a href="#">微博会员</a>
                </dd>
                <dd>
                    <a href="#">微相册</a>
                    <a href="#">微游戏</a>
                </dd>
                <dd>微指数</dd>
            </dl>
            <dl class="list">
                <dt>手机玩微博</dt>
                <dd>
                    <span><img src="/static/img/about_UI/footer_code.jpg" alt=""></span>
                    <a href="#">扫码点击这里下载</a>
                </dd>
            </dl>
            <dl class="list">
                <dt>认证&合作</dt>
                <dd>
                    <a href="#">申请认证</a>
                    <a href="#">链接网站</a>
                </dd>
                <dd>
                    <a href="#">企业微博</a>
                    <a href="#">广告服务</a>
                </dd>
                <dd>
                    <a href="#">微博标识</a>
                    <a href="#">广告代理商</a>
                </dd>
                <dd>开放平台</dd>
            </dl>
            <dl class="list">
                <dt>微博帮助</dt>
                <dd>
                    <a href="#">常见问题</a>
                    <a href="#">自助服务</a>
                </dd>
            </dl>
        </div>
        <div class="other_link">
            <p>微博客服</p>
            <p>京ICP证100780号</p>
            <p>广播电视节目制作经营许可证</p>
        </div>
    </div>
    <script type="text/javascript">
        function ToggleCommentArea(ths) {

          nid = $(ths).attr("target");
          console.log(nid);

		  $.ajax({
		    // async :false,
		    url: "/comment/",
		    type: "GET",
		    data:{"nid":nid},
		    // dataType:"json",
		    success:function(arg) {
		        $(ths).parent().next().toggleClass("hide");
                console.log("success");
                var data_json = JSON.parse(arg);

                $.each(data_json,function(k,v) {
                    console.log(k,v);
                    var user__head_img = v['user__head_img'];
                    var id = v['id'];
                    var comment = v['comment'];
                    var p_comment__user_id = v['p_comment__user_id'];
                    var date = v['date'];
                    var p_comment__user__username = v['p_comment__user__username'];
                    var user__username = v['user__username'];


                    obj = $(ths).parent().next().find("#commentZone");

                    obj.append("<p><img style=\"with:25px;height:25px;float: left;margin:15px 3px 0 3px;\" src="+"/"+user__head_img+"></p>");
                    obj.append("<span style='color:coral;'>"+user__username+":"+"</span>");
                    obj.append("<span style='color:red;'>"+"@"+p_comment__user__username+"  "+comment+"</span>");
                    obj.append("<p>"+date+"</p>");
                    obj.append("<hr style='height: 1px;border: none;background-color: #555555;'/>")

                })


                // console.log(obj.prop("class"));

		    },
		    error:function(arg) {
		      console.log("error");
		      console.log(arg);
		    }

          })
        }

        $(".verify .threepart span").click(function() {
          $(".related_info2 .messageShow").toggle();
          $(".related_info2 .detail_personal_info").toggle();//.removeClass("hide");
        })
    </script>



</body>
</html>